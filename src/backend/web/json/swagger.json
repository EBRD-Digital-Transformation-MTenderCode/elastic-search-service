{
    "swagger": "2.0",
    "info": {
        "description": "сервис для поиска данных о тендерах и бюджетах в ElasticSearch.",
        "version": "1.0.0",
        "title": "Elastic Search service"
    },
  "tags":[
    {
      "name":"methods",
      "description":"API-справочник методов сервиса ElasticSearch."
    },    
    {
      "name":"Budgets",
      "description":"Бюджеты."
    },
    {
      "name":"Tenders",
      "description":"Тендера."
    }
  ],    
    "basePath": "/rest-api",
    "schemes": [
        "http"
    ],
    "paths": {
        "/v1":{
            "get":{
                "tags":[
                    "methods"
                ],
                "summary":"Get all methods (Получение всех methods)",
                "description":"Метод является API-справочником методов ElasticSearch и используется для получения информации о каждом методе сервиса ElasticSearch в формате JSON. Это позволяет клиенту выполнить свою автоматическую подстройку под сервис, либо воспользоватся полученными данными в качестве API-версии help page.",
                "produces":[
                    "application/json"
                ],
                "parameters":[
                    {
                        "in":"query",
                        "name":"url",
                        "type":"string",
                        "required":false,
                        "description":"При заполнении поля значением url отдельного метода получим инфо о свойствах этого метода (для получения url отдельного метода осуществляем метод Get/methods не заполняя данное поле)."
                    }
                ],
                "responses":{
                    "200":{
                        "description":"OK",
                        "schema":{
                            "$ref":"#/definitions/200Methods"
                        }
                    },
                    "400":{
                        "description":"Data Validation Failed."
                    }
                }
            }
        },
        "/v1/budgets/search": {
            "get": {
                "tags": [
                    "Budgets"
                ],
                "summary": "Get all budgets with ElasticSearch (Получение всех бюджетов через Elasticsearch)",
                "description": "получение всех записей о бюджетах через Elasticsearch",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "parameters":[
                    {
                        "in":"query",
                        "name":"ocid",
                        "type":"string",
                        "required":false,
                        "description": "ocid бюджета"
                    },
                    {
                        "in":"query",
                        "name":"title",
                        "type":"string",
                        "required":false,
                        "description": "заголовок бюджета"
                    },
                    {
                        "in":"query",
                        "name":"description",
                        "type":"string",
                        "required":false,
                        "description": "описание бюджета"
                    },
                    {
                        "in":"query",
                        "name":"pageSize",
                        "type":"string",
                        "required":false,
                        "description": "Кол-во записей на странице (значение -1 выводит все записи)"
                    },
                    {
                        "in":"query",
                        "name":"page",
                        "type":"string",
                        "required":false,
                        "description": "Номер страницы для отображения"
                    }
                ],
                "responses":{
                    "200":{
                        "description":"OK",
                        "schema":{
                            "$ref":"#/definitions/200Budget"
                        }
                    },
                    "400":{
                        "description":"Data Validation Failed."
                    }  
                }
            }
        },
        "/v1/tenders/search": {
            "get": {
                "tags": [
                    "Tenders"
                ],
                "summary": "Get all tenders with ElasticSearch (Получение всех тендеров через Elasticsearch)",
                "description": "получение всех записей о тендерах через Elasticsearch",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "parameters":[
                    {
                        "in":"query",
                        "name":"ocid",
                        "type":"string",
                        "required":false,
                        "description": "ocid тендера"
                    },
                    {
                        "in":"query",
                        "name":"title",
                        "type":"string",
                        "required":false,
                        "description": "заголовок тендера"
                    },
                    {
                        "in":"query",
                        "name":"description",
                        "type":"string",
                        "required":false,
                        "description": "описание тендера"
                    },
                    {
                        "in":"query",
                        "name":"search",
                        "type":"string",
                        "required":false,
                        "description": "поле полнотекстового поиска"
                    },
                    {
                        "in": "query",
                        "name": "search_strict",
                        "type": "integer",
                        "enum": [0, 1],
                        "description": "признак строгого соответствия"
                    },
                    {
                        "in":"query",
                        "name":"pageSize",
                        "type":"string",
                        "required":false,
                        "description": "Кол-во записей на странице (значение -1 выводит все записи)"
                    },
                    {
                        "in":"query",
                        "name":"page",
                        "type":"string",
                        "required":false,
                        "description": "Номер страницы для отображения"
                    }
                ],
                "responses":{
                    "200":{
                        "description":"OK",
                        "schema":{
                            "$ref":"#/definitions/200Tender"
                        }
                    },
                    "400":{
                        "description":"Data Validation Failed."
                }
             }
           }
        }
    },
  "definitions":{
    "200Budget":{
      "type":"object",
      "required":[
        "code",
        "status",
        "data"
      ],
      "properties":{
        "code":{
          "type":"integer",
          "format":"int32",
          "example":"200"
        },
        "status":{
          "type":"string",
          "example":"OK"
        },
        "data":{
          "type":"array",
          "items":{
            "$ref":"#/definitions/Budget"
          }
        }
      }
    }, 
    "Budget":{
      "type":"object",
      "required":[
        "ocid",
        "title",
        "description"
      ],
      "properties":{
        "ocid":{
          "type":"string",
          "example":"ocds-t1s2t3-MD-1533819752081"
        },
         "title":{   
          "type":"string",
          "example":"Stuff hot magazine religious staff."
        },       
        "description":{
          "type":"string",
          "example":"Become those state remain gas floor story south war imagine end card sing important risk less nothing mention lay region rich draw about degree."
        }
      }
    },  
    "200Tender":{
      "type":"object",
      "required":[
        "code",
        "status",
        "data"
      ],
      "properties":{
        "code":{
          "type":"integer",
          "format":"int32",
          "example":"200"
        },
        "status":{
          "type":"string",
          "example":"OK"
        },
        "data":{
          "type":"array",
          "items":{
            "$ref":"#/definitions/Tender"
          }
        }
      }
    }, 
    "Tender":{
      "type":"object",
      "required":[
        "tender_id",
        "title",
        "description"
      ],
      "properties":{
        "tender_id":{
          "type":"string",
          "example":"6c440d4ff3364cac9d9b6bb00ccdaa14"
        },
         "title":{   
          "type":"string",
          "example":"[ТЕСТУВАННЯ] Тест документів 6121323"
        },       
        "description":{
          "type":"string",
          "example":"Тестовий mod"
        }
      }
    },  
    "200Methods":{
      "type":"object",
      "required":[
        "code",
        "status",
        "data"
      ],
      "properties":{
        "code":{
          "type":"integer",
          "format":"int32",
          "example":"200"
        },
        "status":{
          "type":"string",
          "example":"OK"
        },
        "data":{
          "type":"array",
          "items":{
            "$ref":"#/definitions/Methods"
          }
        }
      }
    },
    "Methods":{
      "type":"object",
      "required":[
        "id",
        "name"
      ],
      "properties":{
        "id":{
          "type":"string",
          "example":"/v1/company-customer-types"
        },
        "name":{
          "type":"string",
          "example":"Замовник, що здійснює закупівлі для потреб оборони"
        }
      }
    }    
  }
}